"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2124],{2124:($,h,l)=>{l.r(h),l.d(h,{MyProfilePageModule:()=>j});var p=l(4964),f=l(467),m=l(7691),b=l(4967),y=l(4611),e=l(3953),v=l(4666),a=l(4742),u=l(177);function M(o,s){1&o&&e.nrm(0,"img",21),2&o&&e.Y8G("src",s.ngIf.photoURL||"https://ionicframework.com/docs/img/demos/avatar.svg",e.B4B)}function O(o,s){if(1&o&&(e.j41(0,"div")(1,"h2",22),e.EFF(2),e.k0s(),e.j41(3,"p",23),e.EFF(4),e.k0s()()),2&o){const n=s.ngIf;e.R7$(2),e.JRh(n.displayName),e.R7$(2),e.JRh(n.bio)}}function k(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-col",24)(1,"div",25),e.bIt("click",function(){const r=e.eBV(n).$implicit,i=e.XpG();return e.Njj(i.openEditOutfit(r))}),e.j41(2,"ion-thumbnail"),e.nrm(3,"img",26),e.k0s()()()}if(2&o){const n=s.$implicit;e.R7$(3),e.Y8G("src",n.imageUrl,e.B4B)("alt",n.title)}}const _=[{path:"",component:(()=>{var o;class s{constructor(t,r,i,c){this.userProfileService=t,this.modalController=r,this.alert=i,this.ruote=c,this.outfitNumber=0,this.wardrobesNumber=0,this.faveUserOutfitsNumber=0,this.uid=""}ngOnInit(){this.userProfile$=this.userProfileService.getUserProfile(),this.userOutfits$=this.userProfileService.getUserOutfits(),this.userWardrobes$=this.userProfileService.getUserWardrobes(),this.faveUserOutfits$=this.userProfileService.getFaveUserOutfits(),this.userPreference=this.userProfileService.getUserPreference(),this.userProfile$.subscribe(t=>{t&&(this.userProfile=t),this.uid=this.userProfile.uid}),this.userOutfits$.subscribe(t=>{this.outfitNumber=t.length,this.userOutfits=t}),this.userWardrobes$.subscribe(t=>{this.wardrobesNumber=t.length,this.userWardrobes=t}),this.faveUserOutfits$.subscribe(t=>{this.faveUserOutfitsNumber=t.length,this.faveUserOutfits=t})}changeProfilePicture(){var t=this;return(0,f.A)(function*(){const r=yield m.i7.getPhoto({quality:90,allowEditing:!1,resultType:m.LK.DataUrl,source:m.ru.Prompt,promptLabelPhoto:"Seleziona dalla galleria ",promptLabelPicture:"Scatta una foto",promptLabelCancel:"Cancella"});r&&r.dataUrl&&t.userProfileService.updateProfilePicture(r.dataUrl).then(()=>console.log("Profile picture updated")).catch(i=>console.error("Error updating profile picture:",i))})()}editProfile(){var t=this;return(0,f.A)(function*(){const r=yield t.modalController.create({component:b.H,componentProps:{service:"profileForm",editData:t.userProfile}});yield r.present();const{data:i}=yield r.onDidDismiss();i.email!=t.userProfile.email&&t.alert.create({header:"Attenzione!",message:"Non \xe8 possibile cambiare email, pertanto l'email non verr\xe0 sostiuita",buttons:["Ok"]});let d={uid:t.uid,displayName:i.displayName?i.displayName:`${i.name} ${i.cognome}`,cognome:i.cognome,name:i.name,nome:i.nome?"":i.name,email:t.userProfile.email,bio:i.bio?i.bio:""};(yield t.userProfileService.updateUserProfile(d))&&(t.alert.create({header:"Attenzione!",message:"Profilo aggiornato",buttons:["Ok"]}),t.userProfile=d)})()}editUserPreference(){var t=this;return(0,f.A)(function*(){const r=yield t.modalController.create({component:b.H,componentProps:{service:"usersPreferenceForm",editData:t.userPreference}});yield r.present();const{data:i}=yield r.onDidDismiss();let d={uid:t.uid,color:i.color?i.color:[],brend:i.brend?i.brend:[],style:i.style?i.style:[]};(yield t.userProfileService.setUserPreference(d))&&t.alert.create({header:"Attenzione!",message:"Preferenze aggiornate",buttons:["Ok"]})})()}openEditOutfit(t){var r=this;return(0,f.A)(function*(){const i=yield r.modalController.create({component:y.u,componentProps:{isEditMode:!0,outfitData:t}});yield i.present(),yield i.onDidDismiss()})()}logOut(){var t=this;return(0,f.A)(function*(){(yield t.userProfileService.logOut())&&t.ruote.navigate(["/login"])})()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.rXU(v.D),e.rXU(a.W3),e.rXU(a.hG),e.rXU(p.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-my-profile"]],decls:45,vars:10,consts:[[1,"main-content"],[1,"profile-header"],[1,"profile-header-content"],[1,"profile-avatar-container"],[1,"profile-avatar",3,"click"],["class","profile-pic",3,"src",4,"ngIf"],["name","add-circle",1,"add-icon",3,"click"],[1,"profile-stats"],[1,"stat"],[1,"stats-number"],[1,"stats-label"],[4,"ngIf"],[1,"profile-buttons"],["size","small",1,"btn","profile-btn","outfit-button",3,"click"],["slot","start","name","pencil-outline"],["name","ice-cream-outline"],["name","log-out-outline"],[1,"style-main"],[1,"title"],[1,"style"],["class","post-col","size","auto",4,"ngFor","ngForOf"],[1,"profile-pic",3,"src"],[1,"profile-name"],[1,"profile-bio"],["size","auto",1,"post-col"],[1,"post-image",3,"click"],[1,"",3,"src","alt"]],template:function(t,r){1&t&&(e.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"ion-avatar",4),e.bIt("click",function(){return r.changeProfilePicture()}),e.DNE(6,M,1,1,"img",5),e.nI1(7,"async"),e.k0s(),e.j41(8,"ion-icon",6),e.bIt("click",function(){return r.changeProfilePicture()}),e.k0s()(),e.j41(9,"div",7)(10,"div",8)(11,"span",9),e.EFF(12),e.k0s(),e.j41(13,"span",10),e.EFF(14,"Outfit creati"),e.k0s()(),e.j41(15,"div",8)(16,"span",9),e.EFF(17),e.k0s(),e.j41(18,"span",10),e.EFF(19,"Vestiti nell'armadio"),e.k0s()(),e.j41(20,"div",8)(21,"span",9),e.EFF(22),e.k0s(),e.j41(23,"span",10),e.EFF(24,"Desiderati"),e.k0s()()()(),e.DNE(25,O,5,2,"div",11),e.nI1(26,"async"),e.j41(27,"div",12)(28,"ion-button",13),e.bIt("click",function(){return r.editProfile()}),e.nrm(29,"ion-ripple-effect")(30,"ion-icon",14),e.EFF(31," Modifica profilo"),e.k0s(),e.j41(32,"ion-button",13),e.bIt("click",function(){return r.editUserPreference()}),e.nrm(33,"ion-ripple-effect")(34,"ion-icon",15),e.EFF(35,"Modifica preferenze "),e.k0s(),e.j41(36,"ion-button",13),e.bIt("click",function(){return r.logOut()}),e.nrm(37,"ion-ripple-effect")(38,"ion-icon",16),e.k0s()()(),e.j41(39,"div",17)(40,"div",18)(41,"ion-label"),e.EFF(42,"Outfit"),e.k0s()(),e.j41(43,"ion-row",19),e.DNE(44,k,4,2,"ion-col",20),e.k0s()()()()),2&t&&(e.R7$(6),e.Y8G("ngIf",e.bMT(7,6,r.userProfile$)),e.R7$(6),e.JRh(r.outfitNumber),e.R7$(5),e.JRh(r.wardrobesNumber),e.R7$(5),e.JRh(r.faveUserOutfitsNumber),e.R7$(3),e.Y8G("ngIf",e.bMT(26,8,r.userProfile$)),e.R7$(19),e.Y8G("ngForOf",r.userOutfits))},dependencies:[u.Sq,u.bT,a.mC,a.Jm,a.hU,a.W9,a.iq,a.he,a.S7,a.ln,a.Zx,u.Jj],styles:[".profile-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #ddd;padding:16px}.profile-header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.profile-avatar-container[_ngcontent-%COMP%]{position:relative;text-align:center}.profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;border:2px solid #ddd;object-fit:cover}.add-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;font-size:24px;color:var(--outfit-primary-color);background:#fff;border-radius:50%;border:2px solid #036;padding:0}.profile-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:70%}.stat[_ngcontent-%COMP%]{text-align:center}.stats-number[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;color:#000}.stats-label[_ngcontent-%COMP%]{font-size:12px;color:#666}.profile-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:8px 0 4px;text-align:left;color:#000}.profile-bio[_ngcontent-%COMP%]{font-size:12px;color:#666;text-align:left;margin-bottom:16px}.profile-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:16px}.profile-btn[_ngcontent-%COMP%]{font-size:13px;color:#e0e0e0;margin:15px 5px}.post-col[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:100%;max-height:170px;height:auto;border-radius:8px;margin-bottom:8px}.post-col[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 100px}"]}),s})()}];let F=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(_),p.iI]}),s})();var C=l(5553);let j=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.MD,a.bv,C.h,F]}),s})()}}]);