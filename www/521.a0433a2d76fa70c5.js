"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[521],{4967:(W,C,a)=>{a.d(C,{H:()=>y});var s=a(3953),e=a(4742),v=a(9141);let y=(()=>{var _;class i{constructor(d){this.modalController=d,this.service=null,this.title="",this.editData={}}ngOnInit(){}dismiss(){this.modalController.dismiss()}applyData(d){this.modalController.dismiss(d)}functionalInputFormEvent(d){this.modalController.dismiss(d)}}return(_=i).\u0275fac=function(d){return new(d||_)(s.rXU(e.W3))},_.\u0275cmp=s.VBU({type:_,selectors:[["app-modal-form"]],inputs:{service:"service",title:"title",editData:"editData"},decls:9,vars:3,consts:[["slot","end"],[3,"click"],[3,"submitFormEvent","service","editData"]],template:function(d,g){1&d&&(s.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s.EFF(3),s.k0s(),s.j41(4,"ion-buttons",0)(5,"ion-button",1),s.bIt("click",function(){return g.dismiss()}),s.EFF(6,"Chiudi"),s.k0s()()()(),s.j41(7,"ion-content")(8,"app-dynamic-form",2),s.bIt("submitFormEvent",function(b){return g.applyData(b)}),s.k0s()()),2&d&&(s.R7$(3),s.JRh(g.title),s.R7$(5),s.Y8G("service",g.service)("editData",g.editData))},dependencies:[e.Jm,e.QW,e.W9,e.eU,e.BC,e.ai,v.f]}),i})()},521:(W,C,a)=>{a.r(C),a.d(C,{MyWardrobesPageModule:()=>b});var s=a(177),e=a(4341),v=a(4742),y=a(4964),_=a(9661),i=a(3953);const p=[{path:"",component:_.p}];let d=(()=>{var c;class f{}return(c=f).\u0275fac=function(r){return new(r||c)},c.\u0275mod=i.$C({type:c}),c.\u0275inj=i.G2t({imports:[y.iI.forChild(p),y.iI]}),f})();var g=a(6938),P=a(5553);let b=(()=>{var c;class f{}return(c=f).\u0275fac=function(r){return new(r||c)},c.\u0275mod=i.$C({type:c}),c.\u0275inj=i.G2t({imports:[s.MD,e.YN,v.bv,d,g.E9,P.h]}),f})()},9661:(W,C,a)=>{a.d(C,{p:()=>I});var s=a(467),e=a(3953),v=a(4967),y=a(3283),_=a(1182),i=a(4742),p=a(177);function d(r,m){if(1&r){const l=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"il mio Armadio"),e.k0s(),e.j41(4,"ion-buttons",10)(5,"ion-button",11),e.bIt("click",function(n){e.eBV(l);const o=e.XpG();return e.Njj(o.dismissModal(n))}),e.EFF(6,"Chiudi"),e.k0s()()()()}}function g(r,m){if(1&r&&e.nrm(0,"img",22),2&r){const l=e.XpG(2).$implicit;e.FS9("alt",l.name),e.Y8G("src",l.images,e.B4B)}}function P(r,m){if(1&r&&(e.qex(0),e.DNE(1,g,1,2,"img",21),e.bVm()),2&r){const l=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",l.images&&l.images)}}function b(r,m){1&r&&e.nrm(0,"ion-icon",23)}function c(r,m){if(1&r){const l=e.RV6();e.j41(0,"ion-col",14)(1,"ion-card",15)(2,"ion-card-content",16)(3,"div",17),e.bIt("click",function(){const n=e.eBV(l).$implicit,o=e.XpG(2);return e.Njj(o.selectItem(n))}),e.DNE(4,P,2,1,"ng-container",18)(5,b,1,0,"ng-template",null,0,e.C5r),e.j41(7,"p"),e.EFF(8),e.k0s()()(),e.j41(9,"span",19),e.bIt("click",function(){const n=e.eBV(l).$implicit,o=e.XpG(2);return e.Njj(o.deleteItemWadro(n))}),e.nrm(10,"ion-ripple-effect")(11,"ion-icon",20),e.k0s()()()}if(2&r){const l=m.$implicit,t=e.sdS(6);e.R7$(4),e.Y8G("ngIf",l&&l.images&&l.images)("ngIfElse",t),e.R7$(4),e.JRh(l.name)}}function f(r,m){if(1&r&&(e.j41(0,"div")(1,"ion-item",12)(2,"ion-label")(3,"h1"),e.EFF(4),e.k0s()()(),e.j41(5,"ion-grid")(6,"ion-row"),e.DNE(7,c,12,3,"ion-col",13),e.k0s()()()),2&r){const l=m.$implicit;e.R7$(4),e.JRh(l.wardrobesCategory),e.R7$(3),e.Y8G("ngForOf",l.items)}}let I=(()=>{var r;class m{constructor(t,n,o){this.appService=t,this.afAuth=n,this.modalController=o,this.selectedItem=new e.bkB,this.wardrobesItems=this.appService.resultsSignal,this.wardrobesGrupped=[],this.userID="",this.groupedItems={},this.categoryCloth=[],this.subCategoryCloth=[],this.openModal=null}ngOnInit(){var t=this;this.afAuth.authState.subscribe(function(){var n=(0,s.A)(function*(o){o&&(t.userID=o.uid,t.categoryCloth=yield t.appService.getFilteredCollection("outfitsCategories",[]),t.subCategoryCloth=yield t.appService.getFilteredCollection("outfitsSubCategories",[]),t.groupItemsByCategory(),t.openModal=yield t.modalController.getTop(),console.log("pmodal",t.openModal))});return function(o){return n.apply(this,arguments)}}())}groupItemsByCategory(){var t=this;return(0,s.A)(function*(){let n=[{field:"userId",operator:"==",value:t.userID}],o=yield t.appService.getFilteredCollection("wardrobes",n);t.wardrobesGrupped=t.categoryCloth;const E=o.reduce((O,D)=>{const h=D.outfitCategory,u=t.categoryCloth.find(M=>M.id==h),j=t.subCategoryCloth.filter(M=>M.parent==h);let F=O.find(M=>M.wardrobesCategory===(u?u.value:"-"));return F||(F={wardrobesCategory:u?u.value:"-",outfitCategoryID:null==u?void 0:u.id,wardrobesSubCategory:j.map(M=>M.value).join(","),items:[]},O.push(F)),F.items.push(D),O},[]);t.wardrobesItems.set(E)})()}objectKeys(t){return Object.keys(t),Object.keys(t)}deleteItemWadro(t){var n=this;return(0,s.A)(function*(){let o=[{field:"userId",operator:"==",value:n.userID},{field:"id",operator:"==",value:t.id}];(yield n.appService.deleteDocuments("wardrobes",o))&&n.groupItemsByCategory()})()}addClothModal(){var t=this;return(0,s.A)(function*(){const n=yield t.modalController.create({component:v.H,componentProps:{service:"tagForm",title:"Inserisci un nuovo prodotto"}});yield n.present();const{data:o}=yield n.onDidDismiss();console.log("Modal data:",o);const E=o.outfitCategory,O=o.outfitSubCategory,D=t.generateGUID();let h={brend:o.brend,id:D,images:o.Images,name:o.name,outfitCategory:E,outfitSubCategory:O,color:o.color,userId:t.userID};return(yield t.appService.saveInCollection("wardrobes",void 0,h))&&(t.groupItemsByCategory(),(yield t.modalController.getTop())?t.modalController.dismiss(h):t.selectedItem.emit(h)),o})()}searchClothModal(){alert("nessun prodotto presente nei nostri archvi")}generateGUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return`${t()}${t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}selectItem(t){var n=this;return(0,s.A)(function*(){(yield n.modalController.getTop())?n.modalController.dismiss(t):n.selectedItem.emit(t)})()}dismissModal(t){this.modalController.dismiss()}}return(r=m).\u0275fac=function(t){return new(t||r)(e.rXU(y.d),e.rXU(_.DS),e.rXU(i.W3))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-my-wardrobes"]],outputs:{selectedItem:"selectedItem"},decls:24,vars:2,consts:[["icon",""],[4,"ngIf"],[1,"main-content"],[1,"add-clothes-options"],["size","4",1,"option",3,"click"],[1,"updated-label"],["size","large","name","storefront-outline"],["size","large","name","globe-outline"],["size","large","name","add-outline"],[4,"ngFor","ngForOf"],["slot","end"],[3,"click"],["lines","none"],["size","6","size-md","3",4,"ngFor","ngForOf"],["size","6","size-md","3"],[1,"item-card"],[1,"center-content"],[1,"div-item",3,"click"],[4,"ngIf","ngIfElse"],[1,"del-item",3,"click"],["name","trash-outline"],[3,"src","alt",4,"ngIf"],[3,"src","alt"],["name","shirt-outline","size","large"]],template:function(t,n){1&t&&(e.DNE(0,d,7,0,"ion-header",1),e.j41(1,"ion-content")(2,"div",2)(3,"div",3)(4,"ion-grid")(5,"ion-row")(6,"ion-col",4),e.bIt("click",function(){return n.searchClothModal()}),e.j41(7,"div",5),e.nrm(8,"ion-ripple-effect")(9,"ion-icon",6),e.k0s(),e.j41(10,"p"),e.EFF(11,"Aggiungi da Negozio"),e.k0s()(),e.j41(12,"ion-col",4),e.bIt("click",function(){return n.searchClothModal()}),e.nrm(13,"ion-ripple-effect")(14,"ion-icon",7),e.j41(15,"p"),e.EFF(16,"Aggiungi per brend"),e.k0s()(),e.j41(17,"ion-col",4),e.bIt("click",function(){return n.addClothModal()}),e.nrm(18,"ion-ripple-effect")(19,"ion-icon",8),e.j41(20,"p"),e.EFF(21,"Aggiungi Prodotto"),e.k0s()()()()(),e.j41(22,"ion-list"),e.DNE(23,f,8,2,"div",9),e.k0s()()()),2&t&&(e.Y8G("ngIf",n.openModal),e.R7$(23),e.Y8G("ngForOf",n.wardrobesItems()))},dependencies:[p.Sq,p.bT,i.Jm,i.QW,i.b_,i.I9,i.hU,i.W9,i.lO,i.eU,i.iq,i.uz,i.he,i.nf,i.S7,i.ln,i.BC,i.ai],styles:[".main-content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{padding:5px 20px}.main-content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{padding-bottom:5px}.main-content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-right:5px}.main-content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-weight:400;color:var(--ion-color-medium)}.main-content[_ngcontent-%COMP%]   .add-clothes-options[_ngcontent-%COMP%]{text-align:center}.main-content[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:var(--color)}.main-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.5rem;color:var(--color)}.main-content[_ngcontent-%COMP%]   .updated-label[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.main-content[_ngcontent-%COMP%]   .updated[_ngcontent-%COMP%]{position:absolute;top:-10px;right:10px;background-color:#ffc0cb80;border-radius:10px;padding:.2rem .4rem;font-size:.8rem;color:#fff}.main-content[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .center-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.main-content[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .center-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .center-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.main-content[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .del-item[_ngcontent-%COMP%]{position:absolute;top:.2rem;right:.1rem;background-color:#fd4d4d99;border-radius:1.5rem;font-size:.8rem;color:#fff;width:1.5rem;height:1.5rem;text-align:center;align-content:center}"]}),m})()}}]);