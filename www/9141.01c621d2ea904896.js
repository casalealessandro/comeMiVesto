"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9141],{7691:(J,G,C)=>{C.d(G,{i7:()=>$,LK:()=>g,ru:()=>x});var h=C(7464),e=C(467),x=function(w){return w.Prompt="PROMPT",w.Camera="CAMERA",w.Photos="PHOTOS",w}(x||{}),V=function(w){return w.Rear="REAR",w.Front="FRONT",w}(V||{}),g=function(w){return w.Uri="uri",w.Base64="base64",w.DataUrl="dataUrl",w}(g||{});class j extends h.E_{getPhoto(m){var P=this;return(0,e.A)(function*(){return new Promise(function(){var _=(0,e.A)(function*(d,f){if(m.webUseInput||m.source===x.Photos)P.fileInputExperience(m,d,f);else if(m.source===x.Prompt){let v=document.querySelector("pwa-action-sheet");v||(v=document.createElement("pwa-action-sheet"),document.body.appendChild(v)),v.header=m.promptLabelHeader||"Photo",v.cancelable=!1,v.options=[{title:m.promptLabelPhoto||"From Photos"},{title:m.promptLabelPicture||"Take Picture"}],v.addEventListener("onSelection",function(){var L=(0,e.A)(function*(E){0===E.detail?P.fileInputExperience(m,d,f):P.cameraExperience(m,d,f)});return function(E){return L.apply(this,arguments)}}())}else P.cameraExperience(m,d,f)});return function(d,f){return _.apply(this,arguments)}}())})()}pickImages(m){var P=this;return(0,e.A)(function*(){return new Promise(function(){var _=(0,e.A)(function*(d,f){P.multipleFileInputExperience(d,f)});return function(d,f){return _.apply(this,arguments)}}())})()}cameraExperience(m,P,_){var d=this;return(0,e.A)(function*(){if(customElements.get("pwa-camera-modal")){const f=document.createElement("pwa-camera-modal");f.facingMode=m.direction===V.Front?"user":"environment",document.body.appendChild(f);try{yield f.componentOnReady(),f.addEventListener("onPhoto",function(){var v=(0,e.A)(function*(L){const E=L.detail;null===E?_(new h.I9("User cancelled photos app")):E instanceof Error?_(E):P(yield d._getCameraPhoto(E,m)),f.dismiss(),document.body.removeChild(f)});return function(L){return v.apply(this,arguments)}}()),f.present()}catch{d.fileInputExperience(m,P,_)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),d.fileInputExperience(m,P,_)})()}fileInputExperience(m,P,_){let d=document.querySelector("#_capacitor-camera-input");const f=()=>{var v;null===(v=d.parentNode)||void 0===v||v.removeChild(d)};d||(d=document.createElement("input"),d.id="_capacitor-camera-input",d.type="file",d.hidden=!0,document.body.appendChild(d),d.addEventListener("change",v=>{const L=d.files[0];let E="jpeg";if("image/png"===L.type?E="png":"image/gif"===L.type&&(E="gif"),"dataUrl"===m.resultType||"base64"===m.resultType){const k=new FileReader;k.addEventListener("load",()=>{if("dataUrl"===m.resultType)P({dataUrl:k.result,format:E});else if("base64"===m.resultType){const H=k.result.split(",")[1];P({base64String:H,format:E})}f()}),k.readAsDataURL(L)}else P({webPath:URL.createObjectURL(L),format:E}),f()}),d.addEventListener("cancel",v=>{_(new h.I9("User cancelled photos app")),f()})),d.accept="image/*",d.capture=!0,m.source===x.Photos||m.source===x.Prompt?d.removeAttribute("capture"):m.direction===V.Front?d.capture="user":m.direction===V.Rear&&(d.capture="environment"),d.click()}multipleFileInputExperience(m,P){let _=document.querySelector("#_capacitor-camera-input-multiple");const d=()=>{var f;null===(f=_.parentNode)||void 0===f||f.removeChild(_)};_||(_=document.createElement("input"),_.id="_capacitor-camera-input-multiple",_.type="file",_.hidden=!0,_.multiple=!0,document.body.appendChild(_),_.addEventListener("change",f=>{const v=[];for(let L=0;L<_.files.length;L++){const E=_.files[L];let k="jpeg";"image/png"===E.type?k="png":"image/gif"===E.type&&(k="gif"),v.push({webPath:URL.createObjectURL(E),format:k})}m({photos:v}),d()}),_.addEventListener("cancel",f=>{P(new h.I9("User cancelled photos app")),d()})),_.accept="image/*",_.click()}_getCameraPhoto(m,P){return new Promise((_,d)=>{const f=new FileReader,v=m.type.split("/")[1];"uri"===P.resultType?_({webPath:URL.createObjectURL(m),format:v,saved:!1}):(f.readAsDataURL(m),f.onloadend=()=>{const L=f.result;_("dataUrl"===P.resultType?{dataUrl:L,format:v,saved:!1}:{base64String:L.split(",")[1],format:v,saved:!1})},f.onerror=L=>{d(L)})})}checkPermissions(){var m=this;return(0,e.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw m.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw m.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var m=this;return(0,e.A)(function*(){throw m.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var m=this;return(0,e.A)(function*(){throw m.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var m=this;return(0,e.A)(function*(){throw m.unavailable("Not implemented on web.")})()}}new j;const $=(0,h.F3)("Camera",{web:()=>new j})},7464:(J,G,C)=>{C.d(G,{EA:()=>s,E_:()=>E,F3:()=>f,I9:()=>w});var h=C(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var $=function(i){return i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE",i}($||{});class w extends Error{constructor(t,o,r){super(t),this.message=t,this.code=o,this.data=r}}const P=i=>{var t,o,r,c,l;const b=i.CapacitorCustomPlatform||null,p=i.Capacitor||{},I=p.Plugins=p.Plugins||{},y=i.CapacitorPlatforms,Y=(null===(t=null==y?void 0:y.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==b?b.name:(i=>{var t,o;return null!=i&&i.androidBridge?"android":null!==(o=null===(t=null==i?void 0:i.webkit)||void 0===t?void 0:t.messageHandlers)&&void 0!==o&&o.bridge?"ios":"web"})(i)),ue=(null===(o=null==y?void 0:y.currentPlatform)||void 0===o?void 0:o.isNativePlatform)||(()=>"web"!==Y()),de=(null===(r=null==y?void 0:y.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(A=>{const O=ie.get(A);return!!(null!=O&&O.platforms.has(Y())||se(A))}),se=(null===(c=null==y?void 0:y.currentPlatform)||void 0===c?void 0:c.getPluginHeader)||(A=>{var O;return null===(O=p.PluginHeaders)||void 0===O?void 0:O.find(z=>z.name===A)}),ie=new Map,_e=(null===(l=null==y?void 0:y.currentPlatform)||void 0===l?void 0:l.registerPlugin)||((A,O={})=>{const z=ie.get(A);if(z)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),z.proxy;const X=Y(),N=se(A);let B;const be=function(){var D=(0,h.A)(function*(){return!B&&X in O?B=B="function"==typeof O[X]?yield O[X]():O[X]:null!==b&&!B&&"web"in O&&(B=B="function"==typeof O.web?yield O.web():O.web),B});return function(){return D.apply(this,arguments)}}(),oe=D=>{let T;const R=(...S)=>{const M=be().then(U=>{const W=((D,T)=>{var R,S;if(!N){if(D)return null===(S=D[T])||void 0===S?void 0:S.bind(D);throw new w(`"${A}" plugin is not implemented on ${X}`,$.Unimplemented)}{const M=null==N?void 0:N.methods.find(U=>T===U.name);if(M)return"promise"===M.rtype?U=>p.nativePromise(A,T.toString(),U):(U,W)=>p.nativeCallback(A,T.toString(),U,W);if(D)return null===(R=D[T])||void 0===R?void 0:R.bind(D)}})(U,D);if(W){const Z=W(...S);return T=null==Z?void 0:Z.remove,Z}throw new w(`"${A}.${D}()" is not implemented on ${X}`,$.Unimplemented)});return"addListener"===D&&(M.remove=(0,h.A)(function*(){return T()})),M};return R.toString=()=>`${D.toString()}() { [capacitor code] }`,Object.defineProperty(R,"name",{value:D,writable:!1,configurable:!1}),R},le=oe("addListener"),ce=oe("removeListener"),ye=(D,T)=>{const R=le({eventName:D},T),S=function(){var U=(0,h.A)(function*(){const W=yield R;ce({eventName:D,callbackId:W},T)});return function(){return U.apply(this,arguments)}}(),M=new Promise(U=>R.then(()=>U({remove:S})));return M.remove=(0,h.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield S()}),M},ae=new Proxy({},{get(D,T){switch(T){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?ye:le;case"removeListener":return ce;default:return oe(T)}}});return I[A]=ae,ie.set(A,{name:A,proxy:ae,platforms:new Set([...Object.keys(O),...N?[X]:[]])}),ae});return p.convertFileSrc||(p.convertFileSrc=A=>A),p.getPlatform=Y,p.handleError=A=>i.console.error(A),p.isNativePlatform=ue,p.isPluginAvailable=de,p.pluginMethodNoop=(A,O,z)=>Promise.reject(`${z} does not have an implementation of "${O}".`),p.registerPlugin=_e,p.Exception=w,p.DEBUG=!!p.DEBUG,p.isLoggingEnabled=!!p.isLoggingEnabled,p.platform=p.getPlatform(),p.isNative=p.isNativePlatform(),p},d=(i=>i.Capacitor=P(i))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),f=d.registerPlugin;class E{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,o){var r=this;let c=!1;this.listeners[t]||(this.listeners[t]=[],c=!0),this.listeners[t].push(o);const b=this.windowListeners[t];b&&!b.registered&&this.addWindowListener(b),c&&this.sendRetainedArgumentsForEvent(t);const p=function(){var y=(0,h.A)(function*(){return r.removeListener(t,o)});return function(){return y.apply(this,arguments)}}();return Promise.resolve({remove:p})}removeAllListeners(){var t=this;return(0,h.A)(function*(){t.listeners={};for(const o in t.windowListeners)t.removeWindowListener(t.windowListeners[o]);t.windowListeners={}})()}notifyListeners(t,o,r){const c=this.listeners[t];if(c)c.forEach(l=>l(o));else if(r){let l=this.retainedEventArguments[t];l||(l=[]),l.push(o),this.retainedEventArguments[t]=l}}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,o){this.windowListeners[o]={registered:!1,windowEventName:t,pluginEventName:o,handler:r=>{this.notifyListeners(o,r)}}}unimplemented(t="not implemented"){return new d.Exception(t,$.Unimplemented)}unavailable(t="not available"){return new d.Exception(t,$.Unavailable)}removeListener(t,o){var r=this;return(0,h.A)(function*(){const c=r.listeners[t];if(!c)return;const l=c.indexOf(o);r.listeners[t].splice(l,1),r.listeners[t].length||r.removeWindowListener(r.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const o=this.retainedEventArguments[t];o&&(delete this.retainedEventArguments[t],o.forEach(r=>{this.notifyListeners(t,r)}))}}const H=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Q=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ee extends E{getCookies(){return(0,h.A)(function*(){const t=document.cookie,o={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[c,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=Q(c).trim(),l=Q(l).trim(),o[c]=l}),o})()}setCookie(t){return(0,h.A)(function*(){try{const o=H(t.key),r=H(t.value),c=`; expires=${(t.expires||"").replace("expires=","")}`,l=(t.path||"/").replace("path=",""),b=null!=t.url&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${o}=${r||""}${c}; path=${l}; ${b};`}catch(o){return Promise.reject(o)}})()}deleteCookie(t){return(0,h.A)(function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}})()}clearCookies(){return(0,h.A)(function*(){try{const t=document.cookie.split(";")||[];for(const o of t)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})()}clearAllCookies(){var t=this;return(0,h.A)(function*(){try{yield t.clearCookies()}catch(o){return Promise.reject(o)}})()}}f("CapacitorCookies",{web:()=>new ee});const te=function(){var i=(0,h.A)(function*(t){return new Promise((o,r)=>{const c=new FileReader;c.onload=()=>{const l=c.result;o(l.indexOf(",")>=0?l.split(",")[1]:l)},c.onerror=l=>r(l),c.readAsDataURL(t)})});return function(o){return i.apply(this,arguments)}}(),s=(i,t={})=>{const o=Object.assign({method:i.method||"GET",headers:i.headers},t),c=((i={})=>{const t=Object.keys(i);return Object.keys(i).map(c=>c.toLocaleLowerCase()).reduce((c,l,b)=>(c[l]=i[t[b]],c),{})})(i.headers)["content-type"]||"";if("string"==typeof i.data)o.body=i.data;else if(c.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[b,p]of Object.entries(i.data||{}))l.set(b,p);o.body=l.toString()}else if(c.includes("multipart/form-data")||i.data instanceof FormData){const l=new FormData;if(i.data instanceof FormData)i.data.forEach((p,I)=>{l.append(I,p)});else for(const p of Object.keys(i.data))l.append(p,i.data[p]);o.body=l;const b=new Headers(o.headers);b.delete("content-type"),o.headers=b}else(c.includes("application/json")||"object"==typeof i.data)&&(o.body=JSON.stringify(i.data));return o};class n extends E{request(t){return(0,h.A)(function*(){const o=s(t,t.webFetchExtra),r=((i,t=!0)=>i?Object.entries(i).reduce((r,c)=>{const[l,b]=c;let p,I;return Array.isArray(b)?(I="",b.forEach(y=>{p=t?encodeURIComponent(y):y,I+=`${l}=${p}&`}),I.slice(0,-1)):(p=t?encodeURIComponent(b):b,I=`${l}=${p}`),`${r}&${I}`},"").substr(1):null)(t.params,t.shouldEncodeUrlParams),c=r?`${t.url}?${r}`:t.url,l=yield fetch(c,o),b=l.headers.get("content-type")||"";let I,y,{responseType:p="text"}=l.ok?t:{};switch(b.includes("application/json")&&(p="json"),p){case"arraybuffer":case"blob":y=yield l.blob(),I=yield te(y);break;case"json":I=yield l.json();break;default:I=yield l.text()}const K={};return l.headers.forEach((Y,ne)=>{K[ne]=Y}),{data:I,headers:K,status:l.status,url:l.url}})()}get(t){var o=this;return(0,h.A)(function*(){return o.request(Object.assign(Object.assign({},t),{method:"GET"}))})()}post(t){var o=this;return(0,h.A)(function*(){return o.request(Object.assign(Object.assign({},t),{method:"POST"}))})()}put(t){var o=this;return(0,h.A)(function*(){return o.request(Object.assign(Object.assign({},t),{method:"PUT"}))})()}patch(t){var o=this;return(0,h.A)(function*(){return o.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})()}delete(t){var o=this;return(0,h.A)(function*(){return o.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})()}}f("CapacitorHttp",{web:()=>new n})},1889:(J,G,C)=>{C.d(G,{Wi:()=>e,__:()=>h});var h=function(g){return g.Documents="DOCUMENTS",g.Data="DATA",g.Library="LIBRARY",g.Cache="CACHE",g.External="EXTERNAL",g.ExternalStorage="EXTERNAL_STORAGE",g}(h||{}),e=function(g){return g.UTF8="utf8",g.ASCII="ascii",g.UTF16="utf16",g}(e||{})},2739:(J,G,C)=>{C.d(G,{__:()=>e.__});var h=C(7464),e=C(1889);(0,h.F3)("Filesystem",{web:()=>C.e(2937).then(C.bind(C,2937)).then(V=>new V.FilesystemWeb)})},9141:(J,G,C)=>{C.d(G,{f:()=>te});var h=C(467),e=C(3953),x=C(4341),V=C(3283),g=C(4742),j=C(177);function q(u,F){if(1&u&&(e.j41(0,"ion-select-option",2),e.EFF(1),e.k0s()),2&u){const s=F.$implicit,n=e.XpG();e.Y8G("value",s[n.valueExp]),e.R7$(),e.SpI(" ",s[n.displayExp]," ")}}let $=(()=>{var u;class F{constructor(){this.disabled=!1,this.values=[],this.labelPlacement="fixed",this.valueChange=new e.bkB,this.availableOptions=[],this.multiple=!1}ngOnInit(){this.initializeOptions()}initializeOptions(){var n;this.config&&this.config.selectOptions&&(this.selectOptions=this.config.selectOptions,this.displayExp=this.selectOptions.displayExp||"value",this.valueExp=this.selectOptions.valueExp||"id",this.availableOptions=this.selectOptions.options||[],this.config.selectOptions.parent&&this.parentValue&&(this.availableOptions=this.availableOptions.filter(a=>a.parent===this.parentValue)),this.selectedValue=this.selectOptions.multiple?this.values:this.value,null===(n=this.formControlD)||void 0===n||n.setValue(this.selectedValue),this.multiple=this.selectOptions.multiple||!1)}ngOnChanges(n){(n.parentValue||n.config)&&typeof n.parentValue.currentValue<"u"&&""!==n.parentValue.currentValue&&this.filterOptionsBasedOnParent()}filterOptionsBasedOnParent(){const n=this.selectOptions;this.availableOptions=n&&n.parent&&this.parentValue?n.options.filter(a=>a.parent===this.parentValue):n.options}onValueChange(n){this.selectedValue=n.detail.value,this.valueChange.emit(this.selectedValue)}}return(u=F).\u0275fac=function(n){return new(n||u)},u.\u0275cmp=e.VBU({type:u,selectors:[["app-dynamic-select-box"]],inputs:{config:"config",formControlD:"formControlD",parentValue:"parentValue",disabled:"disabled",value:"value",values:"values",labelPlacement:"labelPlacement"},outputs:{valueChange:"valueChange"},features:[e.OA$],decls:3,vars:6,consts:[[1,"selectbox",3,"ionChange","multiple","value","label","labelPlacement","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,a){1&n&&(e.j41(0,"ion-item")(1,"ion-select",0),e.bIt("ionChange",function(t){return a.onValueChange(t)}),e.DNE(2,q,2,2,"ion-select-option",1),e.k0s()()),2&n&&(e.R7$(),e.Y8G("multiple",a.selectOptions.multiple)("value",a.selectedValue)("label",a.config.label)("labelPlacement",a.labelPlacement)("disabled",a.disabled),e.R7$(),e.Y8G("ngForOf",a.availableOptions))},dependencies:[j.Sq,g.uz,g.Nm,g.Ip,g.Je]}),F})();var w=C(7691);C(2739);const P=["imageElement"];function _(u,F){1&u&&e.nrm(0,"ion-spinner",6)}function d(u,F){if(1&u&&(e.j41(0,"ion-thumbnail",7),e.nrm(1,"img",8,1),e.k0s()),2&u){const s=e.XpG();e.R7$(),e.Y8G("src",s.image,e.B4B)}}function f(u,F){if(1&u){const s=e.RV6();e.j41(0,"ion-button",9),e.bIt("click",function(){e.eBV(s);const a=e.XpG();return e.Njj(a.captureImage())}),e.EFF(1," Seleziona foto "),e.k0s()}}let v=(()=>{var u;class F{constructor(n){this.alert=n,this.eventFotoCaptured=new e.bkB,this.image="https://ionicframework.com/docs/img/demos/thumbnail.svg",this.enableNewImagecaptured=!0,this.maxWidth=300,this.maxHeight=1350,this.imageLoading=!0,this.format="",this.openFullScreen=!1}ngOnInit(){}ngAfterViewInit(){this.imageElement&&(this.imageElement.nativeElement.onload=n=>{setTimeout(()=>{this.imageLoading=!1},1500)},this.imageElement.nativeElement.onerror=()=>{this.imageLoading=!1}),this.imageElement||(this.imageLoading=!1)}captureImage(){var n=this;return(0,h.A)(function*(){const a=yield w.i7.getPhoto({quality:50,allowEditing:!1,resultType:w.LK.DataUrl,source:w.ru.Prompt,width:n.maxWidth,promptLabelPhoto:"Seleziona dalla galleria ",promptLabelPicture:"Scatta una foto",promptLabelCancel:"Cancella"});if(a&&a.dataUrl){const i=yield n.resizeImage(a.dataUrl,n.maxWidth,a.format);n.base64String=i.dataUrl,n.format=i.format,n.fileName=`${(new Date).getTime()}.${n.format}`;let o="";n.image=n.base64String,n.eventFotoCaptured.emit({img:n.image,imgName:n.fileName,contentType:o})}})()}resizeImage(n,a,i){return new Promise((t,o)=>{const r=new Image;r.src=n,r.onload=()=>{let c=document.createElement("canvas");const l=c.getContext("2d");let b=r.width,p=r.height;if(b>a){const y=a/r.width;c.width=a,c.height=r.height*y,b=a,p=r.height*y}l.drawImage(r,0,0,b,p);const I=c.toDataURL(`image/${i}`,.7);t({dataUrl:I,format:I.split(";")[0].split("/")[1]})},r.onerror=c=>{o(c)}})}confirmChangeFoto(){var n=this;return(0,h.A)(function*(){return new Promise(function(){var a=(0,h.A)(function*(i){yield(yield n.alert.create({header:"Attenzione!",subHeader:"Sei sicuro di voler sostituire la foto di questo outfit?",message:"Procedendo perderai anche tutti i tag associati e la priorit\xe0 acquisita nell'elenco",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:()=>{i(!1)}},{text:"Si",handler:()=>{n.image=void 0,i(!0)}}]})).present()});return function(i){return a.apply(this,arguments)}}())})()}dataURLtoBlob(n){const a=n.split(","),i=a[0].match(/:(.*?);/)[1],t=atob(a[1]);let o=t.length;const r=new Uint8Array(o);for(;o--;)r[o]=t.charCodeAt(o);return new Blob([r],{type:i})}}return(u=F).\u0275fac=function(n){return new(n||u)(e.rXU(g.hG))},u.\u0275cmp=e.VBU({type:u,selectors:[["app-dynamic-file-box"]],viewQuery:function(n,a){if(1&n&&e.GBs(P,5),2&n){let i;e.mGM(i=e.lsd())&&(a.imageElement=i.first)}},inputs:{image:"image",enableNewImagecaptured:"enableNewImagecaptured",maxWidth:"maxWidth",maxHeight:"maxHeight"},outputs:{eventFotoCaptured:"eventFotoCaptured"},decls:5,vars:3,consts:[["imageContainer",""],["imageElement",""],[1,"image-container"],["name","crescent",4,"ngIf"],["slot","start",4,"ngIf"],["expand","full","size","small","class","select-photo",3,"click",4,"ngIf"],["name","crescent"],["slot","start"],[1,"form-image",3,"src"],["expand","full","size","small",1,"select-photo",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"div",2,0),e.DNE(2,_,1,0,"ion-spinner",3)(3,d,3,1,"ion-thumbnail",4)(4,f,2,0,"ion-button",5),e.k0s()),2&n&&(e.R7$(2),e.Y8G("ngIf",a.imageLoading),e.R7$(),e.Y8G("ngIf",a.image),e.R7$(),e.Y8G("ngIf",a.enableNewImagecaptured))},dependencies:[j.bT,g.Jm,g.w2,g.Zx]}),F})();const L=()=>[];function E(u,F){if(1&u){const s=e.RV6();e.j41(0,"ion-button",7),e.bIt("click",function(){e.eBV(s);const a=e.XpG(2).$implicit,i=e.XpG();return e.Njj(i.onFucBtnClick(a))}),e.nrm(1,"ion-ripple-effect")(2,"ion-icon",8),e.k0s()}}function k(u,F){if(1&u){const s=e.RV6();e.j41(0,"ion-item")(1,"ion-input",5),e.mxI("ngModelChange",function(a){e.eBV(s);const i=e.XpG().$implicit,t=e.XpG();return e.DH7(t.formValues[i.name],a)||(t.formValues[i.name]=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){e.eBV(s);const i=e.XpG().$implicit,t=e.XpG();return e.Njj(t.onValueChange(i.name,a))}),e.DNE(2,E,3,0,"ion-button",6),e.k0s()()}if(2&u){const s=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("formControlName",s.name)("type",s.typeInput?s.typeInput:"text")("placeholder",s.placeholder),e.R50("ngModel",n.formValues[s.name]),e.Y8G("label",s.label)("labelPlacement",n.labelplacement),e.R7$(),e.Y8G("ngIf",s.funcButton)}}function H(u,F){if(1&u){const s=e.RV6();e.j41(0,"ion-item")(1,"ion-textarea",9),e.mxI("ngModelChange",function(a){e.eBV(s);const i=e.XpG().$implicit,t=e.XpG();return e.DH7(t.formValues[i.name],a)||(t.formValues[i.name]=a),e.Njj(a)}),e.k0s()()}if(2&u){const s=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("formControlName",s.name)("placeholder",s.placeholder),e.R50("ngModel",n.formValues[s.name]),e.Y8G("label",s.label)("labelPlacement",n.labelplacement)}}function Q(u,F){if(1&u){const s=e.RV6();e.j41(0,"ion-item")(1,"app-dynamic-file-box",10),e.bIt("eventFotoCaptured",function(a){e.eBV(s);const i=e.XpG().$implicit,t=e.XpG();return e.Njj(t.onValueChangeFile(i.name,a))}),e.k0s()()}if(2&u){const s=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("image",n.formValues[s.name])}}function ee(u,F){if(1&u){const s=e.RV6();e.j41(0,"app-dynamic-select-box",11),e.bIt("valueChange",function(a){e.eBV(s);const i=e.XpG().$implicit,t=e.XpG();return e.Njj(t.onValueChange(i.name,a))}),e.k0s()}if(2&u){const s=e.XpG().$implicit,n=e.XpG();e.Y8G("config",s)("labelPlacement",n.labelplacement)("parentValue",n.formValues[(null==s.selectOptions?null:s.selectOptions.parent)||""])("value",n.formValues[s.name])("values",null!=s.selectOptions&&s.selectOptions.multiple?n.formValues[s.name]:e.lJ4(5,L))}}function re(u,F){if(1&u&&(e.qex(0),e.DNE(1,k,3,7,"ion-item",3)(2,H,2,5,"ion-item",3)(3,Q,2,1,"ion-item",3)(4,ee,1,6,"app-dynamic-select-box",4),e.bVm()),2&u){const s=F.$implicit;e.R7$(),e.Y8G("ngIf","textBox"===s.type),e.R7$(),e.Y8G("ngIf","textArea"===s.type),e.R7$(),e.Y8G("ngIf","fileBox"===s.type),e.R7$(),e.Y8G("ngIf","selectBox"===s.type)}}let te=(()=>{var u;class F{constructor(n,a,i){this.templateService=n,this.formBuilder=a,this.toastController=i,this.btnFormText="Salva",this.submitFormEvent=new e.bkB,this.functionalInputFormEvent=new e.bkB,this.form=new x.gE({}),this.formValues={},this.dataSet=[],this.fields=[],this.formShow=!1,this.fieldConfigs=[],this.labelplacement="stacked"}ngOnInit(){this.service&&(typeof this.editData>"u"&&(this.editData={}),this.templateService.getFormFields(this.service).subscribe(n=>{this.fields=n,this.initializeForm()}))}initializeForm(){this.editData=this.editData||{};const n=new x.gE({});this.fields.forEach(a=>{let i=this.getValidators(a);n.addControl(a.name,new x.MJ(this.editData[a.name]||null,i)),this.initializeFormValues(a)}),this.form=n}getValidators(n){const a=[];return n.required&&a.push(x.k0.required),typeof n.minlength<"u"&&a.push(x.k0.minLength(n.minlength)),typeof n.maxlength<"u"&&a.push(x.k0.maxLength(n.maxlength)),a}initializeFormValues(n){typeof this.editData[n.name]<"u"&&(this.formValues[n.name]=this.editData[n.name]),this.fieldConfigs[n.name]=n}onValueChange(n,a){const i=this.form.get(n);i&&i.value!==a&&(i.setValue(a,{emitEvent:!1}),this.formValues[n]=a),this.fieldConfigs[n]&&this.updateCascadeOptions(n,a)}onValueChangeFile(n,a){const i=this.form.get(n);if(i&&i.value!==a){let t;a.img&&(t=a.img),i.setValue(t,{emitEvent:!1}),this.formValues[n]=t}}updateCascadeOptions(n,a){const i=this.fieldConfigs[n];i&&i.cascadeFrom&&n===i.cascadeFrom&&(this.formValues[n]=i.cascadeOptions[a]||[])}submitForm(){if(this.form.valid)this.submitFormEvent.emit(this.form.value);else{const n=this.getInvalidFields(this.form);this.presentToast(`Mancano i seguenti campi:${n.join(", ")}`)}}getInvalidFields(n){const a=[];return Object.keys(n.controls).forEach(i=>{const t=n.get(i);t&&t.invalid&&a.push(this.fieldConfigs[i].label)}),a}presentToast(n){var a=this;return(0,h.A)(function*(){(yield a.toastController.create({message:n,duration:4500,position:"bottom"})).present()})()}onFucBtnClick(n){this.functionalInputFormEvent.emit({name:"functionalInputClick",nomeCampo:n.name,allFields:n})}}return(u=F).\u0275fac=function(n){return new(n||u)(e.rXU(V.d),e.rXU(x.ok),e.rXU(g.K_))},u.\u0275cmp=e.VBU({type:u,selectors:[["app-dynamic-form"]],inputs:{service:"service",editData:"editData",btnFormText:"btnFormText"},outputs:{submitFormEvent:"submitFormEvent",functionalInputFormEvent:"functionalInputFormEvent"},decls:6,vars:3,consts:[[3,"ngSubmit","formGroup"],[4,"ngFor","ngForOf"],["type","submit","expand","block",1,"btn","outfit-button"],[4,"ngIf"],[3,"config","labelPlacement","parentValue","value","values","valueChange",4,"ngIf"],["line","none",1,"textbox",3,"ngModelChange","formControlName","type","placeholder","ngModel","label","labelPlacement"],["fill","clear","slot","end",3,"click",4,"ngIf"],["fill","clear","slot","end",3,"click"],["name","open-outline"],["rows","4","lines","none",1,"textbox",3,"ngModelChange","formControlName","placeholder","ngModel","label","labelPlacement"],[3,"eventFotoCaptured","image"],[3,"valueChange","config","labelPlacement","parentValue","value","values"]],template:function(n,a){1&n&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return a.submitForm()}),e.j41(1,"ion-list"),e.DNE(2,re,5,4,"ng-container",1),e.k0s(),e.j41(3,"ion-button",2),e.nrm(4,"ion-ripple-effect"),e.EFF(5),e.k0s()()),2&n&&(e.Y8G("formGroup",a.form),e.R7$(2),e.Y8G("ngForOf",a.fields),e.R7$(3),e.SpI(" ",a.btnFormText," "))},dependencies:[j.Sq,j.bT,g.Jm,g.iq,g.$w,g.uz,g.nf,g.S7,g.nc,g.Gw,x.qT,x.BC,x.cb,x.j4,x.JD,$,v]}),F})()}}]);